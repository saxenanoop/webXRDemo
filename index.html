<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Polygonal Forest AR</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>

    <!-- AR.js (location-based WebAR) -->
    <script src="https://rawcdn.githack.com/AR-js-org/AR.js/3.4.2/aframe/build/aframe-ar.min.js"></script>

    <link rel="stylesheet" href="style.css" />
  </head>

  <body style="margin: 0; overflow: hidden;">
    <a-scene
      vr-mode-ui="enabled: false"
      embedded
      arjs="sourceType: webcam; debugUIEnabled: false;"
    >

      <a-camera gps-camera rotation-reader></a-camera>

      <!-- Forest -->
      <a-entity id="forest"></a-entity>

    </a-scene>

    <script>
      const forest = document.getElementById("forest");
      const treeCount = 12;
      const radius = 5; // meters

      for (let i = 0; i < treeCount; i++) {
        const angle = (i / treeCount) * Math.PI * 2;
        const x = Math.cos(angle) * radius;
        const z = Math.sin(angle) * radius;

        const tree = document.createElement("a-entity");

        // Trunk
        const trunk = document.createElement("a-cylinder");
        trunk.setAttribute("color", "#8B4513");
        trunk.setAttribute("radius", "0.1");
        trunk.setAttribute("height", "1");
        trunk.setAttribute("position", "0 0.5 0");
        tree.appendChild(trunk);

        // Leaves
        const leaves = document.createElement("a-cone");
        leaves.setAttribute("color", "#228B22");
        leaves.setAttribute("radius-bottom", "0.5");
        leaves.setAttribute("radius-top", "0");
        leaves.setAttribute("height", "1");
        leaves.setAttribute("position", "0 1.5 0");
        tree.appendChild(leaves);

        tree.setAttribute("position", `${x} 0 ${z}`);
        forest.appendChild(tree);
      }
    </script>
  </body>
</html>
